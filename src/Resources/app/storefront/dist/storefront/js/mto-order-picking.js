"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["mto-order-picking"],{465:(t,e,i)=>{var s,n,r,a=i(6285),o=i(9068),l=(i(1186),i(1966));class d extends a.Z{init(){this.registerEventListeners();const t=this;this.el.querySelector("button#order").addEventListener("click",(function(t){})),this.el.querySelector("form#shipping-details").addEventListener("submit",(function(e){e.preventDefault(),e.stopPropagation(),0===t.el.querySelectorAll("input:invalid").length&&t.order()}))}registerEventListeners(){const t=this;this.el.querySelector("[data-picking-list-select-all]").addEventListener("click",(function(e){t.setAllProductsChecked(e.target.checked),t.el.querySelectorAll("[data-picking-list] input[type=checkbox]").forEach((function(t){t.checked=e.target.checked}))}));this.el.querySelectorAll("[data-picking-list]").forEach((function(e){const i=e.dataset.pickingListNumber;e.querySelectorAll("input[type=checkbox]").forEach((e=>{e.addEventListener("change",(function(e){const i=e.target.parentElement.dataset.pickingListNumber;t.setPickingListProductsChecked(i,e.target.checked)}))})),e.querySelectorAll("button").forEach((e=>{e.addEventListener("click",(function(e){t.setPickingListProductsVisible(i,e.target.ariaPressed)}))}))})),this.el.querySelector('[data-shipping-option-toggle][data-name="fix"]').addEventListener("click",(function(e){e.target.checked?t.el.querySelector('[data-shipping-option-container][data-name="fix"]').classList.remove("hidden"):t.el.querySelector('[data-shipping-option-container][data-name="fix"]').classList.add("hidden")}))}setPickingListProductsChecked(t,e=!0){this.el.querySelectorAll('div[data-picking-product][data-picking-list-number="'+t+'"] input[type=checkbox]').forEach((function(t){t.checked=e}))}setAllProductsChecked(t=!0){this.el.querySelectorAll("div[data-picking-product] input[type=checkbox]").forEach((function(e){e.checked=t}))}setPickingListProductsVisible(t,e="true"){const i="true"===e?"visible":"hidden",s="true"===e?"hidden":"visible";this.el.querySelectorAll('[data-picking-product][data-picking-list-number="'+t+'"]').forEach((t=>{t.classList.add(i),t.classList.remove(s)}))}order(){const t=this.el.querySelectorAll("[data-picking-product]:has(input:checked)"),e=[];t.forEach((function(t){e.push({referencedId:t.dataset.productId,sku:t.dataset.productSku,pickingListNumber:t.dataset.pickingListNumber,quantity:t.querySelector("input.product-quantity").value,netPrice:t.querySelector("input.product-net-price").value,grossPrice:t.querySelector("input.product-gross-price").value})}));const i={billing:this.el.querySelector("select[data-billing-address] option:checked").dataset.address,shipping:this.el.querySelector("select[data-shipping-address] option:checked").dataset.address},s={};this.el.querySelectorAll("input:not([type=checkbox])[data-shipping-option],textarea[data-shipping-option], input[type=checkbox][data-shipping-option]:checked").forEach((function(t){const e=t.dataset.name;s[e]=t.value}));const n=window.router["frontend.account.order-picking-add-to-cart"],r=o.Z.getPluginInstances("OffCanvasCart");l.Z.iterate(r,(t=>{t.openOffCanvas(n,JSON.stringify({redirectTo:"frontend.cart.offcanvas",lineItems:e,addresses:i,options:s}),(()=>{this.$emitter.publish("openOffCanvasCart")}))}))}}s=d,r={pickingLists:[],visiblePickingLists:[]},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r;window.PluginManager.register("OrderPickingPlugin",d,"[data-order-picking-plugin]")},1186:(t,e,i)=>{i.d(e,{Z:()=>c});var s,n,r,a=i(6285),o=i(3206),l=i(46),d=i(1966);class c extends a.Z{init(){if(!1===this._isFormElement())throw Error("Element is not of type <form>");this.options.stylingEnabled&&this._setNoValidate(),this._registerEvents()}_isFormElement(){return"form"===this.el.tagName.toLowerCase()}_setNoValidate(){this.el.setAttribute("novalidate","")}_registerEvents(){this.options.stylingEnabled&&this.el.addEventListener("submit",this._onFormSubmit.bind(this)),this._registerValidationListener(this.options.equalAttr,this._onValidateEqualTrigger.bind(this),["change"]),this._registerValidationListener(this.options.equalAttr,l.Z.debounce(this._onValidateEqual.bind(this),this.options.debounceTime),[this.options.eventName]),this._registerValidationListener(this.options.lengthAttr,this._onValidateLength.bind(this),["change"]),this._registerValidationListener(this.options.requiredAttr,this._onValidateRequired.bind(this),["change"])}_registerValidationListener(t,e,i){const s=o.Z.querySelectorAll(this.el,`[${t}]`,!1);s&&d.Z.iterate(s,(t=>{d.Z.iterate(i,(i=>{t.removeEventListener(i,e),t.addEventListener(i,e)}))}))}_onFormSubmit(t){const e=this.el.checkValidity();!1===e&&(t.preventDefault(),t.stopPropagation()),this.el.classList.add(this.options.styleCls),this.$emitter.publish("beforeSubmit",{validity:e})}_onValidateEqualTrigger(t){const e=o.Z.getDataAttribute(t.target,this.options.equalAttr),i=o.Z.querySelectorAll(this.el,`[${this.options.equalAttr}='${e}']`);i[1].value.trim().length>0&&d.Z.iterate(i,(e=>{e.dispatchEvent(new CustomEvent(this.options.eventName,{target:t.target}))})),this.$emitter.publish("onValidateEqualTrigger")}_onValidateEqual(t){const e=o.Z.getDataAttribute(t.target,this.options.equalAttr),i=o.Z.querySelectorAll(this.el,`[${this.options.equalAttr}='${e}']`);let s=!0;[...i].reduce(((t,e)=>{t.value.trim()!==e.value.trim()&&(s=!1)})),d.Z.iterate(i,(t=>{s?this._setFieldToValid(t,this.options.equalAttr):this._setFieldToInvalid(t,this.options.equalAttr)})),this.$emitter.publish("onValidateEqual")}_onValidateLength(t){const e=t.target,i=e.value.trim(),s=o.Z.getDataAttribute(t.target,this.options.lengthAttr),n=e.nextElementSibling;i.length<s?(this._setFieldToInvalid(e,this.options.lengthAttr),n&&n.hasAttribute(this.options.lengthTextAttr)&&n.classList.add(this.options.hintCls)):(this._setFieldToValid(e,this.options.lengthAttr),n&&n.hasAttribute(this.options.lengthTextAttr)&&n.classList.remove(this.options.hintCls)),this.$emitter.publish("onValidateLength")}_onValidateRequired(t){const e=t.target;""===e.value.trim()?this._setFieldToInvalid(e,this.options.requiredAttr):this._setFieldToValid(e,this.options.requiredAttr),this.$emitter.publish("onValidateRequired")}_setFieldToInvalid(t,e){this._showInvalidMessage(t,e),t.setAttribute("invalid",!0),this.$emitter.publish("setFieldToInvalid")}_showInvalidMessage(t,e){const i=t.parentElement;i&&this.options.stylingEnabled&&i.classList.add(this.options.styleCls);const s=o.Z.getDataAttribute(t,`${e}-message`,!1);s&&(i.querySelector(".js-validation-message")||t.insertAdjacentHTML("afterEnd",`<div class="invalid-feedback js-validation-message" data-type="${e}">${s}</div>`),t.setCustomValidity(s)),this.$emitter.publish("showInvalidMessage")}_setFieldToValid(t,e){this._hideInvalidMessage(t,e),t.removeAttribute("invalid"),t.setCustomValidity(""),this.$emitter.publish("setFieldToValid")}_hideInvalidMessage(t,e){const i=t.parentElement;if(i&&this.options.stylingEnabled&&i.classList.remove(this.options.styleCls),i){const t=o.Z.querySelector(i,`.js-validation-message[data-type=${e}]`,!1);t&&t.remove()}this.$emitter.publish("hideInvalidMessage")}}s=c,r={stylingEnabled:!0,styleCls:"was-validated",hintCls:"invalid-feedback",debounceTime:"150",eventName:"ValidateEqual",equalAttr:"data-form-validation-equal",lengthAttr:"data-form-validation-length",lengthTextAttr:"data-form-validation-length-text",requiredAttr:"data-form-validation-required"},(n=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,e||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}(n="options"))in s?Object.defineProperty(s,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[n]=r}},t=>{t.O(0,["vendor-node","vendor-shared"],(()=>{return e=465,t(t.s=e);var e}));t.O()}]);